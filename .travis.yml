dist: xenial
language: python
python:
  - 3.6.3
  
branches:
  only:
    - master

env:
  - DJANGO_VERSION=2.2.4

before_install:
  - virtualenv venv
  - source venv/bin/activate

install:
  - pip install -r requirements.txt
  - cd app && yarn install
  - cd ../

before_script:
  - cp test.env.ini env.ini

script:
  - cd app && yarn run build
  - cd ../
  - python run-tests.py

after_success:
  - ./deploy.sh
  - echo "Success!"
